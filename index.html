<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pro MCQ AI | Neon Studio</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<style>
:root {
  --bg: #05070a;
  --card: rgba(15, 23, 42, 0.8);
  --neon: #00f2ff;
  --accent: #7000ff;
  --accent-2: #ff007a;
  --text: #f8fafc;
  --text-dim: #94a3b8;
  --glass-border: rgba(255, 255, 255, 0.1);
}

.light {
  --bg: #f0f4f8;
  --card: rgba(255, 255, 255, 0.85);
  --neon: #4f46e5;
  --accent: #9333ea;
  --accent-2: #db2777;
  --text: #1e293b;
  --text-dim: #64748b;
  --glass-border: rgba(0, 0, 0, 0.1);
}

* {
  box-sizing: border-box;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  background: var(--bg);
  background-image: 
    radial-gradient(circle at 10% 20%, rgba(112, 0, 255, 0.15) 0%, transparent 40%),
    radial-gradient(circle at 90% 80%, rgba(0, 242, 255, 0.1) 0%, transparent 40%);
  color: var(--text);
  display: flex;
  justify-content: center;
  align-items: center;
  overflow-x: hidden;
}

.container {
  max-width: 700px;
  width: 95%;
  padding: 40px 20px;
  position: relative;
}

/* Glass Card Style */
.card {
  background: var(--card);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  padding: 35px;
  border-radius: 24px;
  border: 1px solid var(--glass-border);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; height: 3px;
  background: linear-gradient(90deg, var(--neon), var(--accent), var(--accent-2));
}

h1 {
  font-size: 2rem;
  font-weight: 800;
  text-align: center;
  margin-top: 0;
  background: linear-gradient(to right, var(--neon), #fff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  letter-spacing: -0.5px;
}

/* Inputs & Controls */
label {
  display: block;
  margin-top: 20px;
  margin-bottom: 8px;
  font-size: 0.85rem;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 1px;
}

input, select {
  width: 100%;
  padding: 14px 18px;
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  color: var(--text);
  font-size: 1rem;
}

input:focus, select:focus {
  outline: none;
  border-color: var(--neon);
  box-shadow: 0 0 15px rgba(0, 242, 255, 0.2);
}

/* Modern Buttons */
button {
  width: 100%;
  padding: 16px;
  margin-top: 25px;
  border-radius: 14px;
  border: none;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  color: #fff;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  box-shadow: 0 10px 20px rgba(112, 0, 255, 0.3);
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 15px 25px rgba(112, 0, 255, 0.4);
  filter: brightness(1.1);
}

button:active { transform: translateY(0); }

.btn-secondary {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--glass-border);
  color: var(--text);
  margin-top: 10px;
}

.btn-show-ans {
  background: transparent;
  border: 1px dashed var(--neon);
  color: var(--neon);
}

/* Progress & Quiz UI */
.progress-text {
  font-weight: 600;
  color: var(--neon);
  margin-bottom: 20px;
}

.question-text {
  font-size: 1.15rem;
  line-height: 1.6;
  margin-bottom: 25px;
  display: block;
}

.answer {
  display: none;
  margin: 20px 0;
  padding: 15px;
  background: rgba(34, 197, 94, 0.1);
  border-left: 4px solid #22c55e;
  border-radius: 8px;
  color: #4ade80;
  font-weight: 600;
}

/* Loader */
.loader { margin-top: 30px; }
.bar-container {
  height: 6px;
  width: 100%;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  overflow: hidden;
}
.bar {
  height: 100%;
  width: 40%;
  background: linear-gradient(90deg, var(--neon), var(--accent));
  border-radius: 10px;
  animation: loading 1.5s infinite ease-in-out;
}

@keyframes loading {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(250%); }
}

.toggle-container {
  position: absolute;
  top: -60px;
  right: 0;
}

.toggle-btn {
  width: auto;
  padding: 8px 16px;
  font-size: 0.8rem;
}

.hidden { display: none; }

/* Mobile Optimization */
@media (max-width: 480px) {
  .card { padding: 25px; }
  h1 { font-size: 1.5rem; }
}
</style>
</head>

<body>
<div class="container">

  <div id="access" class="card">
    <h1>üîê AI Terminal</h1>
    <label>Access Key</label>
    <input id="codeInput" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="text-align: center; letter-spacing: 4px;">
    <button onclick="checkCode()">Decrypt System</button>
    <p id="error" style="color:#ff4d4d; text-align:center; font-size: 0.9rem; margin-top: 15px;"></p>
  </div>

  <div id="app" class="hidden">
    <div class="toggle-container">
      <button class="toggle-btn btn-secondary" onclick="toggleMode()">üåì Switch Theme</button>
    </div>

    <div class="card">
      <h1>üìÑ Smart MCQ Engine</h1>
      
      <label>Source Document</label>
      <input type="file" id="pdfFile" accept="application/pdf">

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <div>
          <label>Complexity</label>
          <select id="difficulty">
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
          </select>
        </div>
        <div>
          <label>Quantity</label>
          <input type="number" id="count" value="5" min="1" max="20">
        </div>
      </div>

      <button onclick="generate()">
        <span>üöÄ</span> Generate Assessment
      </button>

      <div id="loader" class="loader hidden">
        <p style="text-align:center; font-size: 0.9rem; color: var(--text-dim);">Analyzing document & generating questions...</p>
        <div class="bar-container">
          <div class="bar"></div>
        </div>
      </div>
    </div>

    <div id="quiz" style="margin-top: 30px;"></div>
  </div>
</div>

<script>
/* ORIGINAL SCRIPT PRESERVED AS REQUESTED 
*/
const codes=["NEON123","AI2025","OPEN789"];
function checkCode(){
  const val=codeInput.value.trim();
  if(codes.includes(val)){
    access.style.display="none";
    app.classList.remove("hidden");
  }else error.innerText="Invalid access code";
}

function toggleMode(){
  document.body.classList.toggle("light");
}

async function readPDF(file){
  const data=await file.arrayBuffer();
  const pdf=await pdfjsLib.getDocument({data}).promise;
  let text="";
  for(let i=1;i<=pdf.numPages;i++){
    const page=await pdf.getPage(i);
    const content=await page.getTextContent();
    content.items.forEach(t=>text+=t.str+" ");
  }
  return text.slice(0,12000);
}

// API KEY PRESERVED
const OPENAI_KEY="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";
let questions=[],index=0;

async function generate(){
  if(!pdfFile.files[0]) return alert("Upload a PDF");
  loader.classList.remove("hidden");
  quiz.innerHTML="";
  index=0;

  const text=await readPDF(pdfFile.files[0]);
  const prompt=`Generate ${count.value} ${difficulty.value} MCQs.
Format strictly:
Q:
A)
B)
C)
D)
Answer:
Content:${text}`;

  const res=await fetch("https://api.openai.com/v1/chat/completions",{
    method:"POST",
    headers:{
      "Content-Type":"application/json",
      "Authorization":"Bearer "+OPENAI_KEY
    },
    body:JSON.stringify({
      model:"gpt-4o-mini",
      messages:[{role:"user",content:prompt}]
    })
  });

  const data=await res.json();
  loader.classList.add("hidden");
  questions=data.choices[0].message.content
    .split("Q")
    .filter(q=>q.trim());
  showQuestion();
}

function showQuestion(){
  const q=questions[index];
  if(!q) return;

  const parts=q.split("Answer:");
  quiz.innerHTML=`
    <div class="card">
      <div class="progress-text">
        Question ${index+1} / ${questions.length}
      </div>
      <span class="question-text"><strong>Q.</strong> ${parts[0]}</span>

      <button class="btn-show-ans" onclick="this.nextElementSibling.style.display='block'">
        üîç Reveal Correct Answer
      </button>
      <div class="answer">Correct Logic: ${parts[1]||""}</div>

      <button onclick="nextQuestion()">
        ${index+1===questions.length?"Finish Quiz":"Next Question ‚Üí"}
      </button>
    </div>
  `;
}

function nextQuestion(){
  index++;
  if(index<questions.length){
    showQuestion();
  }else{
    quiz.innerHTML=`
      <div class="card" style="text-align:center">
        <h1 style="background: linear-gradient(to right, #22c55e, #00f2ff); -webkit-background-clip: text;">üèÜ Assessment Complete</h1>
        <p style="color: var(--text-dim)">You have processed all questions from the document.</p>
        <button class="btn-secondary" onclick="location.reload()">Start New Session</button>
      </div>
    `;
  }
}
</script>
</body>
</html>
